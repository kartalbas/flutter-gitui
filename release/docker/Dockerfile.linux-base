FROM ghcr.io/cirruslabs/flutter:stable

# Install all Linux desktop build dependencies
RUN apt-get update && apt-get install -y \
    cmake \
    ninja-build \
    clang \
    pkg-config \
    libgtk-3-dev \
    libnotify-dev \
    imagemagick \
    && rm -rf /var/lib/apt/lists/*

# Enable Linux desktop support
RUN flutter config --enable-linux-desktop

# Pre-download Flutter Linux artifacts (speeds up subsequent builds)
RUN flutter precache --linux

WORKDIR /app
